<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Test B2 - Prepositions</title>
  <link rel="stylesheet" href="estilos.css">

</head>
<body>
  
   <h1 class="titulo">TEST B2 - Prepositions</h1>
  <div class="card">
    <div id="contenedor-pregunta"></div>
    <p class="instruccion">Choose only one</p>
    <button id="siguiente" style="display:none;">Next</button>
  </div>

  <script>
    let preguntas = [];
    let indice = 0;

    async function cargarPreguntas() {
      const res = await fetch('preguntas.json');
      preguntas = await res.json();
      mostrarPregunta();
    }

    function mostrarPregunta() {
      const contenedor = document.getElementById('contenedor-pregunta');
      const pregunta = preguntas[indice];
      contenedor.innerHTML = `<h2>${pregunta.pregunta}</h2>`;
      pregunta.opciones.forEach((opcion, i) => {
        const boton = document.createElement('button');
        boton.textContent = opcion;
        boton.className = "opcion";
        boton.onclick = () => comprobarRespuesta(i);
        contenedor.appendChild(boton);
      });
    }

    function comprobarRespuesta(seleccionado) {
      const botones = document.querySelectorAll('.opcion');
      botones.forEach((btn, i) => {
        btn.disabled = true;
        if (i === preguntas[indice].respuesta_correcta) {
          btn.classList.add('correcta');
        } else if (i === seleccionado) {
          btn.classList.add('incorrecta');
        }
      });
      document.getElementById('siguiente').style.display = 'inline';
    }

    document.getElementById('siguiente').onclick = () => {
      indice++;
      if (indice < preguntas.length) {
        mostrarPregunta();
        document.getElementById('siguiente').style.display = 'none';
      } else {
        document.getElementById('contenedor-pregunta').innerHTML = '<h2>Â¡Has completado el test!</h2>';
        document.getElementById('siguiente').style.display = 'none';
      }
    };

    cargarPreguntas();
  </script>
</body>
</html>
